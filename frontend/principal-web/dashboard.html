<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Principal Dashboard - SMD System</title>
    <link rel="shortcut icon" type="image/png" href="../admin-web/assets/images/logos/favicon.png" />
    <link rel="stylesheet" href="../admin-web/assets/css/styles.min.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #5570f1;
            --secondary: #6c757d;
            --success: #13deb9;
            --info: #3dd5f3;
            --warning: #ffb64d;
            --danger: #fa5441;
            --light: #f8f9fa;
            --dark: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f4f7fa;
            margin: 0;
            padding: 0;
        }

        .container-fluid {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #5570f1 0%, #4a60d4 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: bold;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 15px;
        }

        .sidebar-menu a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .sidebar-menu .menu-title {
            font-size: 12px;
            font-weight: bold;
            color: rgba(255,255,255,0.6);
            text-transform: uppercase;
            margin-top: 15px;
            margin-bottom: 10px;
            padding: 5px 15px;
        }

        .sidebar-menu .menu-divider {
            border-top: 1px solid rgba(255,255,255,0.1);
            margin: 15px 0;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .topbar {
            background: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .topbar-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .topbar-left h2 {
            color: #2c3e50;
            font-size: 22px;
            margin: 0;
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #5570f1;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-info strong {
            color: #2c3e50;
            font-size: 14px;
        }

        .user-info small {
            color: #999;
            font-size: 12px;
        }

        .logout-btn {
            background: #fa5441;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background: #e83d38;
        }

        /* Content Area */
        .content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .breadcrumb {
            color: #999;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .breadcrumb a {
            color: #5570f1;
            text-decoration: none;
        }

        /* Page Title */
        .page-title {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 30px;
            font-weight: 600;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .stat-card-title {
            color: #999;
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-card-icon {
            font-size: 24px;
            opacity: 0.8;
        }

        .stat-card-value {
            font-size: 32px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .stat-card-footer {
            font-size: 12px;
            color: #999;
        }

        /* Table Section */
        .section-title {
            font-size: 18px;
            color: #2c3e50;
            margin: 30px 0 20px 0;
            font-weight: 600;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .btn-primary {
            background: #5570f1;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn-primary:hover {
            background: #4860d4;
        }

        .table-responsive {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #f8f9fa;
        }

        th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            font-size: 13px;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
            color: #666;
        }

        tbody tr:hover {
            background: #f8f9fa;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-success {
            background: #13deb9;
            color: white;
        }

        .badge-warning {
            background: #ffb64d;
            color: white;
        }

        .error-message {
            background: #fa5441;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
            }
            .main-content {
                margin-left: 200px;
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                üéì SMD Principal
            </div>
            <ul class="sidebar-menu">
                <li class="menu-title">üìä CH·ª®C NƒÇNG</li>
                <li><a href="javascript:void(0)" onclick="showPage('dashboard'); this.classList.add('active');" class="active">üìà T·ªïng Quan</a></li>
                <li><a href="javascript:void(0)" onclick="showPage('approvals'); this.classList.add('active');">‚úÖ Ph√™ Duy·ªát ƒê·ªÅ C∆∞∆°ng</a></li>
                <li><a href="javascript:void(0)" onclick="showPage('reports'); this.classList.add('active');">üìä B√°o C√°o H·ªá Th·ªëng</a></li>
                <li><a href="javascript:void(0)" onclick="showPage('faculty'); this.classList.add('active');">üë• Qu·∫£n L√Ω Khoa</a></li>
                <li class="menu-divider"></li>
                <li class="menu-title">‚öôÔ∏è C√ÄI ƒê·∫∂T</li>
                <li><a href="javascript:void(0)" onclick="logout()">üö™ ƒêƒÉng Xu·∫•t</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <div class="topbar">
                <div class="topbar-left">
                    <h2 id="pageTitle">Dashboard - Hi·ªáu Tr∆∞·ªüng</h2>
                </div>
                <div class="topbar-right">
                    <div class="user-profile">
                        <div class="user-avatar" id="userAvatar">P</div>
                        <div class="user-info">
                            <strong id="userName">Hi·ªáu Tr∆∞·ªüng</strong>
                            <small id="userEmail">principal@edu.vn</small>
                        </div>
                    </div>
                    <button class="logout-btn" onclick="logout()">ƒêƒÉng Xu·∫•t</button>
                </div>
            </div>

            <!-- Content -->
            <div class="content">
                <!-- Error Alert -->
                <div id="errorAlert" style="display: none;"></div>

                <!-- ===== PAGE 1: DASHBOARD ===== -->
                <div id="page-dashboard" class="page">
                    <div class="breadcrumb">
                        <a href="#home">Home</a> / <span>Dashboard</span>
                    </div>
                    <h1 class="page-title">Dashboard - Hi·ªáu Tr∆∞·ªüng</h1>

                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div class="stat-card-title">T·ªïng Gi·∫£ng Vi√™n</div>
                                <div class="stat-card-icon">üë®‚Äçüè´</div>
                            </div>
                            <div class="stat-card-value" id="lecturerCount">0</div>
                            <div class="stat-card-footer">ƒëang ho·∫°t ƒë·ªông</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div class="stat-card-title">T·ªïng Sinh Vi√™n</div>
                                <div class="stat-card-icon">üë®‚Äçüéì</div>
                            </div>
                            <div class="stat-card-value" id="studentCount">0</div>
                            <div class="stat-card-footer">ƒëang ho·∫°t ƒë·ªông</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div class="stat-card-title">T·ªïng ƒê·ªÅ C∆∞∆°ng</div>
                                <div class="stat-card-icon">üìö</div>
                            </div>
                            <div class="stat-card-value" id="syllabusCount">0</div>
                            <div class="stat-card-footer">ƒë√£ t·∫°o</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div class="stat-card-title">C·∫ßn Ph√™ Duy·ªát</div>
                                <div class="stat-card-icon">‚è≥</div>
                            </div>
                            <div class="stat-card-value" id="pendingCount">0</div>
                            <div class="stat-card-footer">ƒë·ª£i x·ª≠ l√Ω</div>
                        </div>
                    </div>

                    <!-- System Status -->
                    <div class="section-title">üìã T√¨nh Tr·∫°ng H·ªá Th·ªëng</div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Th√†nh Ph·∫ßn</th>
                                    <th>Tr·∫°ng Th√°i</th>
                                    <th>Chi Ti·∫øt</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Backend API</td>
                                    <td><span class="badge badge-success">‚úÖ Ho·∫°t ƒê·ªông</span></td>
                                    <td>http://localhost:8000</td>
                                </tr>
                                <tr>
                                    <td>Database</td>
                                    <td><span class="badge badge-success">‚úÖ K·∫øt N·ªëi</span></td>
                                    <td>syllabus_db</td>
                                </tr>
                                <tr>
                                    <td>Authentication</td>
                                    <td><span class="badge badge-success">‚úÖ X√°c Th·ª±c</span></td>
                                    <td id="authStatus">JWT Token Valid</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Recent Activities -->
                    <div class="section-title">üîî Ho·∫°t ƒê·ªông G·∫ßn ƒê√¢y</div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Th·ªùi Gian</th>
                                    <th>S·ª± Ki·ªán</th>
                                    <th>Ng∆∞·ªùi D√πng</th>
                                    <th>Tr·∫°ng Th√°i</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td id="currentTime">-</td>
                                    <td>ƒêƒÉng nh·∫≠p Dashboard</td>
                                    <td id="activityUser">Principal</td>
                                    <td><span class="badge badge-success">‚úÖ Th√†nh C√¥ng</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ===== PAGE 2: APPROVALS ===== -->
                <div id="page-approvals" class="page" style="display: none;">
                    <div class="breadcrumb">
                        <a href="#home">Home</a> / <span>Ph√™ Duy·ªát ƒê·ªÅ C∆∞∆°ng</span>
                    </div>
                    <h1 class="page-title">‚úÖ Ph√™ Duy·ªát ƒê·ªÅ C∆∞∆°ng Chi·∫øn L∆∞·ª£c Cu·ªëi C√πng</h1>
                    
                    <div class="section-header">
                        <h3 class="section-title">Duy·ªát c√°c Syllabus quan tr·ªçng theo quy ƒë·ªãnh c·ªßa tr∆∞·ªùng</h3>
                        <div style="color: #999; font-size: 14px;" id="pendingInfo"></div>
                    </div>

                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>M√£ M√¥n H·ªçc</th>
                                    <th>T√™n M√¥n H·ªçc</th>
                                    <th>Gi·∫£ng Vi√™n</th>
                                    <th>Khoa</th>
                                    <th>Ng√†y N·ªôp</th>
                                    <th>Tr·∫°ng Th√°i</th>
                                    <th>H√†nh ƒê·ªông</th>
                                </tr>
                            </thead>
                            <tbody id="approvalsTable">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ===== PAGE 3: REPORTS ===== -->
                <div id="page-reports" class="page" style="display: none;">
                    <div class="breadcrumb">
                        <a href="#home">Home</a> / <span>B√°o C√°o</span>
                    </div>
                    <h1 class="page-title">üìà B√°o C√°o H·ªá Th·ªëng</h1>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div class="stat-card-title">ƒê·ªÅ C∆∞∆°ng ƒê√£ Duy·ªát</div>
                                <div class="stat-card-icon">‚úÖ</div>
                            </div>
                            <div class="stat-card-value" id="approvedCount">0</div>
                            <div class="stat-card-footer">ho√†n th√†nh</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div class="stat-card-title">ƒê·ªÅ C∆∞∆°ng Ch·ªù Duy·ªát</div>
                                <div class="stat-card-icon">‚è≥</div>
                            </div>
                            <div class="stat-card-value" id="pendingReportCount">0</div>
                            <div class="stat-card-footer">ƒëang x·ª≠ l√Ω</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div class="stat-card-title">KPI Duy·ªát Trung B√¨nh</div>
                                <div class="stat-card-icon">‚è±Ô∏è</div>
                            </div>
                            <div class="stat-card-value" id="kpiScore">0</div>
                            <div class="stat-card-footer">ng√†y</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div class="stat-card-title">Ti·∫øn ƒê·ªô To√†n Tr∆∞·ªùng</div>
                                <div class="stat-card-icon">üìä</div>
                            </div>
                            <div class="stat-card-value" id="progressPercent">0</div>
                            <div class="stat-card-footer">%</div>
                        </div>
                    </div>

                    <div class="section-title">üìä Th·ªëng K√™ Syllabus Theo Khoa</div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Khoa/B·ªô M√¥n</th>
                                    <th>T·ªïng ƒê·ªÅ C∆∞∆°ng</th>
                                    <th>ƒê√£ Duy·ªát</th>
                                    <th>Ch·ªù Duy·ªát</th>
                                    <th>T·ª´ Ch·ªëi</th>
                                    <th>T·ª∑ L·ªá (%)</th>
                                </tr>
                            </thead>
                            <tbody id="facultyReportTable">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="section-title">üìà Th·ªëng K√™ Theo Tr·∫°ng Th√°i</div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tr·∫°ng Th√°i</th>
                                    <th>S·ªë L∆∞·ª£ng</th>
                                    <th>T·ª∑ L·ªá (%)</th>
                                    <th>Bi·ªÉu ƒê·ªì</th>
                                </tr>
                            </thead>
                            <tbody id="statusReportTable">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ===== PAGE 4: FACULTY ===== -->
                <div id="page-faculty" class="page" style="display: none;">
                    <div class="breadcrumb">
                        <a href="#home">Home</a> / <span>Khoa/B·ªô M√¥n</span>
                    </div>
                    <h1 class="page-title">üë• Khoa/B·ªô M√¥n</h1>
                    
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Khoa/B·ªô M√¥n</th>
                                    <th>Tr∆∞·ªüng Khoa</th>
                                    <th>S·ªë Gi·∫£ng Vi√™n</th>
                                    <th>S·ªë ƒê·ªÅ C∆∞∆°ng</th>
                                    <th>Ti·∫øn ƒê·ªô</th>
                                </tr>
                            </thead>
                            <tbody id="facultyTable">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock Data
        const mockSyllabi = [
            { id: 1, code: 'CS101', name: 'Nh·∫≠p M√¥n L·∫≠p Tr√¨nh', lecturer: 'Nguy·ªÖn VƒÉn A', faculty: 'CNTT', submitted: '2026-01-20', status: 'pending' },
            { id: 2, code: 'CS102', name: 'C·∫•u Tr√∫c D·ªØ Li·ªáu', lecturer: 'Tr·∫ßn Th·ªã B', faculty: 'CNTT', submitted: '2026-01-21', status: 'pending' },
            { id: 3, code: 'CS103', name: 'C∆° S·ªü D·ªØ Li·ªáu', lecturer: 'L√™ VƒÉn C', faculty: 'CNTT', submitted: '2026-01-22', status: 'approved' },
            { id: 4, code: 'MATH101', name: 'Gi·∫£i T√≠ch 1', lecturer: 'Ph·∫°m Th·ªã D', faculty: 'To√°n', submitted: '2026-01-19', status: 'pending' },
            { id: 5, code: 'MATH102', name: 'ƒê·∫°i S·ªë Tuy·∫øn T√≠nh', lecturer: 'Ho√†ng VƒÉn E', faculty: 'To√°n', submitted: '2026-01-23', status: 'approved' },
            { id: 6, code: 'PHY101', name: 'V·∫≠t L√Ω ƒê·∫°i C∆∞∆°ng', lecturer: 'V≈© Th·ªã F', faculty: 'V·∫≠t L√Ω', submitted: '2026-01-24', status: 'rejected' },
        ];

        const mockFaculties = [
            { name: 'C√¥ng Ngh·ªá Th√¥ng Tin', head: 'TS. Nguy·ªÖn Minh K', lecturers: 12, syllabi: 24 },
            { name: 'To√°n - Tin', head: 'PGS. Tr·∫ßn Qu·ªëc L', lecturers: 10, syllabi: 18 },
            { name: 'V·∫≠t L√Ω', head: 'TS. L√™ Trung M', lecturers: 8, syllabi: 14 },
            { name: 'H√≥a H·ªçc', head: 'TS. Ph·∫°m Hoa N', lecturers: 9, syllabi: 15 },
        ];

        const token = localStorage.getItem('access_token');
        
        if (!token) {
            window.location.href = '../index.html';
            throw new Error('No token found');
        }

        // Fetch user data on load
        fetch('http://localhost:8000/users/me', {
            method: 'GET',
            headers: { 'Authorization': `Bearer ${token}` }
        })
        .then(r => {
            if (!r.ok) throw new Error(`API Error: ${r.status}`);
            return r.json();
        })
        .then(user => {
            if (user.role !== 'principal') {
                throw new Error(`Wrong role: ${user.role}. Expected principal.`);
            }
            
            document.getElementById('userName').textContent = user.full_name || 'Principal';
            document.getElementById('userEmail').textContent = user.email;
            document.getElementById('userAvatar').textContent = (user.full_name || 'P')[0];
            document.getElementById('activityUser').textContent = user.full_name || 'Principal';
            
            // Initialize dashboard data
            initializeDashboard();
        })
        .catch((err) => {
            console.error('Error:', err);
            const errorAlert = document.getElementById('errorAlert');
            errorAlert.style.display = 'block';
            errorAlert.innerHTML = `
                <div class="error-message">
                    ‚ùå ${err.message}<br>
                    <a href="../index.html" style="color: white; text-decoration: underline;">Quay l·∫°i ƒëƒÉng nh·∫≠p</a>
                </div>
            `;
            localStorage.clear();
            setTimeout(() => {
                window.location.href = '../index.html';
            }, 3000);
        });

        function initializeDashboard() {
            // Dashboard stats
            document.getElementById('lecturerCount').textContent = '48';
            document.getElementById('studentCount').textContent = '1,250';
            document.getElementById('syllabusCount').textContent = '61';
            document.getElementById('pendingCount').textContent = '4';
            document.getElementById('currentTime').textContent = new Date().toLocaleString('vi-VN');

            // Load approvals
            loadApprovals();

            // Load reports
            loadReports();

            // Load faculties
            loadFaculties();
        }

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.style.display = 'none';
            });

            // Show selected page
            document.getElementById('page-' + pageId).style.display = 'block';

            // Update sidebar active state
            document.querySelectorAll('.sidebar-menu a').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function loadApprovals() {
            const pending = mockSyllabi.filter(s => s.status === 'pending');
            document.getElementById('pendingInfo').textContent = `T·ªïng ${pending.length} ƒë·ªÅ c∆∞∆°ng c·∫ßn ph√™ duy·ªát`;

            const table = document.getElementById('approvalsTable');
            table.innerHTML = pending.map(s => `
                <tr>
                    <td><strong>${s.code}</strong></td>
                    <td>${s.name}</td>
                    <td>${s.lecturer}</td>
                    <td>${s.faculty}</td>
                    <td>${s.submitted}</td>
                    <td><span class="badge badge-warning">‚è≥ Ch·ªù Duy·ªát</span></td>
                    <td>
                        <button class="btn-small btn-approve" onclick="approveSyllabus(${s.id})">‚úÖ Duy·ªát</button>
                        <button class="btn-small btn-reject" onclick="rejectSyllabus(${s.id})">‚ùå T·ª´ Ch·ªëi</button>
                    </td>
                </tr>
            `).join('');
        }

        function loadReports() {
            const approved = mockSyllabi.filter(s => s.status === 'approved').length;
            const pending = mockSyllabi.filter(s => s.status === 'pending').length;
            const total = mockSyllabi.length;

            document.getElementById('approvedCount').textContent = approved;
            document.getElementById('pendingReportCount').textContent = pending;
            document.getElementById('kpiScore').textContent = '3.2';
            document.getElementById('progressPercent').textContent = Math.round((approved / total) * 100);

            // Faculty report
            const facultyTable = document.getElementById('facultyReportTable');
            facultyTable.innerHTML = mockFaculties.map(fac => {
                const facSyllabi = mockSyllabi.filter(s => s.faculty === fac.name);
                const approved = facSyllabi.filter(s => s.status === 'approved').length;
                const pending = facSyllabi.filter(s => s.status === 'pending').length;
                const rejected = facSyllabi.filter(s => s.status === 'rejected').length;
                const total = facSyllabi.length;
                const percent = total > 0 ? Math.round((approved / total) * 100) : 0;

                return `
                    <tr>
                        <td><strong>${fac.name}</strong></td>
                        <td>${total}</td>
                        <td><span class="badge badge-success">${approved}</span></td>
                        <td><span class="badge badge-warning">${pending}</span></td>
                        <td><span class="badge" style="background: #ff6b6b; color: white;">${rejected}</span></td>
                        <td><strong>${percent}%</strong></td>
                    </tr>
                `;
            }).join('');

            // Status report
            const statusTable = document.getElementById('statusReportTable');
            const statuses = [
                { name: 'ƒê√£ Duy·ªát', count: approved, color: '#13deb9' },
                { name: 'Ch·ªù Duy·ªát', count: pending, color: '#ffb64d' },
                { name: 'T·ª´ Ch·ªëi', count: mockSyllabi.filter(s => s.status === 'rejected').length, color: '#ff6b6b' }
            ];

            statusTable.innerHTML = statuses.map(s => {
                const percent = total > 0 ? Math.round((s.count / total) * 100) : 0;
                return `
                    <tr>
                        <td><strong>${s.name}</strong></td>
                        <td>${s.count}</td>
                        <td><strong>${percent}%</strong></td>
                        <td>
                            <div style="background: ${s.color}; height: 20px; width: ${percent}%; border-radius: 3px;"></div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function loadFaculties() {
            const table = document.getElementById('facultyTable');
            table.innerHTML = mockFaculties.map(fac => {
                const facSyllabi = mockSyllabi.filter(s => s.faculty === fac.name);
                const approved = facSyllabi.filter(s => s.status === 'approved').length;
                const total = facSyllabi.length;
                const percent = total > 0 ? Math.round((approved / total) * 100) : 0;

                return `
                    <tr>
                        <td><strong>${fac.name}</strong></td>
                        <td>${fac.head}</td>
                        <td>${fac.lecturers}</td>
                        <td>${total}</td>
                        <td>
                            <div style="background: #f0f0f0; border-radius: 20px; padding: 5px 10px; font-size: 12px;">
                                <span style="color: #13deb9; font-weight: bold;">${approved}/${total}</span> (${percent}%)
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function approveSyllabus(id) {
            const syllabus = mockSyllabi.find(s => s.id === id);
            if (syllabus) {
                syllabus.status = 'approved';
                alert(`‚úÖ ƒê√£ duy·ªát ƒê·ªÅ c∆∞∆°ng: ${syllabus.name}\n\nX√°c nh·∫≠n v√† cho ph√©p xu·∫•t b·∫£n.`);
                loadApprovals();
                loadReports();
            }
        }

        function rejectSyllabus(id) {
            const syllabus = mockSyllabi.find(s => s.id === id);
            if (syllabus) {
                syllabus.status = 'rejected';
                alert(`‚ùå ƒê√£ t·ª´ ch·ªëi ƒê·ªÅ c∆∞∆°ng: ${syllabus.name}\n\nVui l√≤ng y√™u c·∫ßu gi·∫£ng vi√™n ch·ªânh s·ª≠a.`);
                loadApprovals();
                loadReports();
            }
        }

        function logout() {
            localStorage.clear();
            window.location.href = '../index.html';
        }
    </script>

    <style>
        .btn-small {
            padding: 6px 12px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            margin: 2px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-approve {
            background: #13deb9;
            color: white;
        }

        .btn-approve:hover {
            background: #0ac8a1;
            transform: scale(1.05);
        }

        .btn-reject {
            background: #ff6b6b;
            color: white;
        }

        .btn-reject:hover {
            background: #ff5252;
            transform: scale(1.05);
        }

        .page {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</body>
</html>
